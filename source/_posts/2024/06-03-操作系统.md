---
title: 操作系统
date: 2024-06-03 12:40:34
tags: 考研笔记
---

# 操作系统

> 参考哔哩哔哩的课程：https://www.bilibili.com/video/BV1YB4y1i7xe/?spm_id_from=333.337.search-card.all.click&vd_source=731595967596af37618c926a191e7811

## 第一章 操作系统概述

### 操作系统的基本概念

操作系统是资源管理程序，其作用是控制管理计算机系统的资源和程序的指向。

操作系统的作用目标：

- 通过资源管理，提高计算机系统的**效率**

- 改善界面，为用户提供友好的工作环境（方便性）

操作系统的特征（需要记忆）

- 并发 
- 共享
- 虚拟
- 异步

### 操作系统的五大基本功能

- 处理器管理

  > 进程控制，进程通讯，进程同步，进程调度

- 存储器管理

  > 内存分配，内存保护，内存扩充

- 设备管理

  > 设备分配，设备传输控制，设备独立性

- 文件管理

  > 文件存储空间的管理，文件目录管理，文件操作管理，文件保护

- 用户接口

  > 命令接口，程序接口，图形接口

### 研究OS的应用角度

- 资源管理角度

  > OS是计算机资源的管理者

- 从用户的角度看

  > 操作系统是计算机提供用户的接口
  >
  > (用户可以通过一下两种方式来使用计算机：命令方式，系统调用方式)

- 从机器扩充的角度看

  > 操作系统是部署在裸机之上的第一层软件
  >
  > (配置了操作系统的机器，称之为虚拟机)

### 操作系统的发展与形成

- 无操作系统阶段

  > 1.人工操作方式：用户独占全机，CPU等待人工操作
  >
  > 2.脱机输入，输出：减少CPU的空闲时间，提高了I/O速度

- 单道批处理系统：

  > 在解决人机矛盾和CPU与IO设备不匹配矛盾过程中形成的
  >
  > (最主要的缺点：系统资源利用不充分)

- 多道批处理系统：

  > 优点(多道)：系统内可同时容纳多个作业。
  >
  > - 资源利用率高
  > - 系统吞吐量大
  >
  > 缺点(成批)：作业一旦进入系统，用户就不能直接干预该作业运行。(不提供人机交互能力)
  >
  > - 平均周期时间长
  > - 无交互能力

### 操作系统的分类

- 批处理操作系统：

> 对多个作业集中就行批处理，系统中配置了一个监督程序对一批作业自动就行处理
>
> 一个作业包括：程序、数据和作业说明书，作业说明书中描述该作业的处理要求

- 分时操作系统：

  > 允许多个用户交互使用计算机:
  >
  > - 多路性。微观上各用户轮流使用计算机，宏观上各用户并行工作。
  > - 交互性。用户直接控制自己的"程序"运行，以人机会话方式工作。
  > - 独立性。各用户可独立操作，互不干涉，不会发生混淆或破坏现象。
  > - 及时性。用户的请求能及时作出响应，尤其是较批处理系统响应时间快

![image-20240622185252147](06-03-操作系统/image-20240622185252147.png)

- 实时操作系统

  > 及时处理控制过程返回的数据，做出响应
  >
  > 实时系统具有以下特点:
  >
  > - 及时性
  > - 可靠性
  > - 较强的过载防护能力
  > - 支持多道程序设计：提高系统利用率和吞吐量
  >
  > （实时系统最主要的特征便是及时性和可靠性）

![a47c0c52736f1430079fe5ca04bf8e0](06-03-操作系统/a47c0c52736f1430079fe5ca04bf8e0.png)

#### 分时操作系统和实时操作系统的区别

设计目标不同：

> 前者为了给多用户提供一个通用的交互型开发运行环境，后者通常为特殊用途提供专用系统

交互性强弱不同：

> 前者交互性强，后者交互性弱

响应时间要求不同

> 前者以用户能接受的响应时间为标准，后者则与受控对象及应用场合有关，变化范围很大

#### 其它操作系统

- 嵌入式操作系统
- 集群系统
- 网络操作系统：共享网络资源，无任务分配功能
- 分布式操作系统：共享网络资源，有任务分配功能

- 单用户单任务操作系统

  > C/PM和MS-DOS

- 单用户多任务操作系统

  >Windows

- 多用户多任务操作系统

  > UNIX OS，Windows XP。UNIX操作系统变形是Solaris OS和Linux OS

- 微机操作系统

  > IBM-PC上的操作系统

### 核心态和用户态

- 核心态（管态、系统态）：是操作系统管理程序执行时机器所处的状态，能执行包括权限指令的一切指令，能访问所有寄存器和存储区
- 用户态（目态）：是用户程序执行时机器所属的状态。只能执行规定的指令，只能访问指定的寄存器和存储区

![image-20240622191556347](06-03-操作系统/image-20240622191556347.png)

### 权限指令与非权限指令

特权指令只能由操作系统使用的指令，只能在核心态下执行。例如：

- 启动某设备指令
- 停机指令
- 设置时钟指令
- I/O指令
- 清内存指令
- 存储保护指令
- 中断操作指令(开中断、关中断、屏蔽中断)

> 非特权指令是用户可以去执行的指令，在用户态下执行

### 系统调用

系统调用(系统呼叫)：目的是请求系统资源。指运行在用户空间的程序向操作系统内核请求需要更高权限运行的服务。系统调用提供了用户程序与操作系统之间的接口。

![image-20240622192538842](06-03-操作系统/image-20240622192538842.png)

### 中断的基本概念

![image-20240622192715954](06-03-操作系统/image-20240622192715954.png)

![image-20240622192737575](06-03-操作系统/image-20240622192737575.png)

### 微内核

- 微内核技术的定义

> 把操作系统中更多的成分和功能放到更高的层次(即用户模式)中去运行，而留下一个尽量小的内核，用它来完成操作系统最基本的核心功能，这种技术被称为微内核技术。

**微内核结构**由一个非常简单的硬件抽象层和一组比较关键的原语或系统调用组成，这些原语仅仅包括了建立一个系统必需的几个部分，如线程管理、地址空间和进程间通信等。其他的管理程序则尽可能地放在内核之外。

> 所谓原语：一般是指由若干条指令组成的程序段，用来实现某个特定功能，在执行过程中不可被中断。

![image-20240622192938379](06-03-操作系统/image-20240622192938379.png)

### 总结

![image-20240622193019392](06-03-操作系统/image-20240622193019392.png)

## 第二章 进程与线程

### 前趋图

前趋图：指的是一个有向无循环图，用于描述进程之间执行的先后顺序

![image-20240622193241729](06-03-操作系统/image-20240622193241729.png)

程序顺序执行时的特征：

> 顺序性，封闭性，可再现性

程序并发执行时的特征

> 间断性，失去封闭性，不可再现性

由这些特性映入进程，便于更好描述和控制程序的并发执行，实现资源共享。

### 进程的基本概念

进程的特征:

- 动态性：进程是程序在处理器上的一次执行过程，因而是动态的(动态性是进程的最基本的特征)
- 并发性：指多个进程实体同时存于内存中，能在一段时间内同时运行
- 独立性：是指进程实体是一个能独立运行、独立获得资源和独立接受调度的基本单位
- 异步性：进程按照各自独立运行的、不可预知的速度向前推进
- 结构性：从结构上看，进程实体是由程序段、数据段和进程控制块(PCB)三部分组成的。

> 程序段:是指程序的代码
> 数据段:是指运行过程中产生的各种数据

#### 进程控制块(PCB)

PCB：是进程实体的重要组成部分，其中记录了用于描述进程情况及控制进程运行所需要的全部信息通过PCB，使得原来不能并发执行的程序，成为能并发执行的进程。在进程的控制和管理中，随进程的创建而建立PCB;因进程的状态变化而修改PCB的相关内容;当进程被撤销时，系统收回其PCB。可见系统是根据PCB来感知进程的存在的，PCB是进程存在的唯一标志，一个进程只能有一个进程控制块。

![image-20240622194634874](06-03-操作系统/image-20240622194634874.png)

#### 进程控制块的组织方式

- 线性方式
- 链接方式
- 索引方式

![image-20240622194724520](06-03-操作系统/image-20240622194724520.png)

### 进程的基本状态

进程有三种基本状态：就绪状态、执行状态、阻塞(等待)状态

![image-20240622194946309](06-03-操作系统/image-20240622194946309.png)

![image-20240622194936466](06-03-操作系统/image-20240622194936466.png)

![image-20240622195003493](06-03-操作系统/image-20240622195003493.png)

#### 进程的控制

![image-20240622195053267](06-03-操作系统/image-20240622195053267.png)

#### 进程状态转换的过程

![image-20240622195124802](06-03-操作系统/image-20240622195124802.png)

### 进程通信

![image-20240622195422825](06-03-操作系统/image-20240622195422825.png)

![image-20240622195522216](06-03-操作系统/image-20240622195522216.png)

![image-20240622195545798](06-03-操作系统/image-20240622195545798.png)

### 线程的基本概念

![image-20240622195816397](06-03-操作系统/image-20240622195816397.png)

#### 线程的优缺点

![image-20240622195851577](06-03-操作系统/image-20240622195851577.png)

### 比较区别

![image-20240622195915859](06-03-操作系统/image-20240622195915859.png)

![image-20240622195942813](06-03-操作系统/image-20240622195942813.png)



### 调度的基本概念

![image-20240622200131180](06-03-操作系统/image-20240622200131180.png)

#### 衡量调度算法的性能指标

![image-20240622200253748](06-03-操作系统/image-20240622200253748.png)

### 进程调度的时机

![image-20240622200345415](06-03-操作系统/image-20240622200345415.png)

![image-20240622200408019](06-03-操作系统/image-20240622200408019.png)

### 进程调度的任务与方式

![image-20240622200449686](06-03-操作系统/image-20240622200449686.png)

### 典型调度算法

#### 典型调度算法：先来先服务调度算法(FCFS)

![image-20240622200626956](06-03-操作系统/image-20240622200626956.png)

#### 典型调度算法：短作业有限调度算法(SJF)

![image-20240622200755437](06-03-操作系统/image-20240622200755437.png)

#### 典型调度算法：高响应比有限调度算法(HRRN)

![image-20240622202037455](06-03-操作系统/image-20240622202037455.png)

#### 典型调度算法：时间片轮调度算法(RR)

![image-20240622202425887](06-03-操作系统/image-20240622202425887.png)

#### 典型调度算法：优先级调度算法(PAS)

![image-20240622202503102](06-03-操作系统/image-20240622202503102.png)

#### 典型调度算法：多级反馈队列调度算法(MFQ)

![image-20240622202555944](06-03-操作系统/image-20240622202555944.png)

#### 总结

![image-20240622202644856](06-03-操作系统/image-20240622202644856.png)

### 上下文及其切换机制

![image-20240622203003475](06-03-操作系统/image-20240622203003475.png)

![image-20240622203014210](06-03-操作系统/image-20240622203014210.png)

### 互斥和同步

![image-20240622203736052](06-03-操作系统/image-20240622203736052.png)

#### 互斥实现方法

![image-20240622204205273](06-03-操作系统/image-20240622204205273.png)

![image-20240622204218616](06-03-操作系统/image-20240622204218616.png)

![image-20240622204311018](06-03-操作系统/image-20240622204311018.png)

### 信号量机制

![image-20240622204800191](06-03-操作系统/image-20240622204800191.png)

### 经典同步问题

#### 生产-消费者问题

![image-20240622210408252](06-03-操作系统/image-20240622210408252.png)

#### 读者-写者问题

![image-20240622210421558](06-03-操作系统/image-20240622210421558.png)

#### 哲学家-进餐问题

![image-20240622210432654](06-03-操作系统/image-20240622210432654.png)

### 死锁的基本概念

![image-20240622210449589](06-03-操作系统/image-20240622210449589.png)

#### 预防死锁

![image-20240622210512343](06-03-操作系统/image-20240622210512343.png)

#### 死锁避免

![image-20240622210534104](06-03-操作系统/image-20240622210534104.png)

- 银行家算法

#### 死锁检测

![image-20240622210610289](06-03-操作系统/image-20240622210610289.png)

![image-20240622210633473](06-03-操作系统/image-20240622210633473.png)

## 第三章 内存管理

### 程序的装入和链接

![image-20240622211225929](06-03-操作系统/image-20240622211225929.png)

### 逻辑地址与物理地址

![image-20240622211242883](06-03-操作系统/image-20240622211242883.png)

### 内存保护

![image-20240622211305406](06-03-操作系统/image-20240622211305406.png)

### 对换和覆盖

![image-20240622211332602](06-03-操作系统/image-20240622211332602.png)

### 管理方式

#### 连续分配管理方式

![image-20240622211656675](06-03-操作系统/image-20240622211656675.png)

#### 内存分配与回收

![image-20240622211527327](06-03-操作系统/image-20240622211527327.png)

#### 分页存储管理方式

![image-20240622211756010](06-03-操作系统/image-20240622211756010.png)

![image-20240622211839526](06-03-操作系统/image-20240622211839526.png)

#### 分段存储管理方式

![image-20240622212000329](06-03-操作系统/image-20240622212000329.png)

#### 段页式存储管理方式

![image-20240622213024585](06-03-操作系统/image-20240622213024585.png)

![image-20240622213047187](06-03-操作系统/image-20240622213047187.png)

### 虚拟内存管理
