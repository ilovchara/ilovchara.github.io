---
title: unity - 拾荒者
date: 2023-08-24 11:11:19
tags: 工程
categories: 工程
swiper_index: 5
typora-root-url: ./unity
---

# 拾荒者

在做过坦克大战之后，简单地熟悉了`unity`这个软件的功能，但是还是不明白一些动画的制作和脚本函数的命令，这些东西太多太杂。在这之前已经做了一半这个拾荒者这个项目了，但是感觉没总结，感觉没学。所以说打算重新做这个，然后记录一下笔记。因为是`2d`的，所以说比较简单，下面就具体的实现一下吧。

## 前期准备

也不需要什么准备，只需要获取相应的游戏素材即可，对应的`unity`操作需要一步一步做。比较重要的就是记住几个文件夹的作用：

![image-20230911195121591](image-20230911195121591.png)

这几个文件夹分别是：`动画`，`音效`，`字体`，`预制件（生成的物体）`,`场景`，`脚本代码`,`素材`。

在存储物品的时候一定要理清顺序，排列清楚。

## 制作主角

先切割我们的画布，也就是我们的地图素材。在`unity2d`中，所有的物品之类的东西都是一个画，可以这样子理解。

点击我们的素材

![image-20230911195903112](image-20230911195903112.png)

![image-20230911195948615](image-20230911195948615.png)

右边就会出现对应的参数，点击`sprite editor`就可以对图片预览切割，我这里已经切割好了，可以查看预览效果:
![image-20230911200422551](image-20230911200422551.png)

这就是我们接下来要使用的图片素材。构造主角就是绿色衣服的这个小伙子，我们需要给他个物体。

只需要按住`shift`,框选连续的图片拉入到我们的场景框也就是这个：

![image-20230911200820039](image-20230911200820039.png)

就可以创建对应的物体了，创建完成之后就是这样子：一个小人孤零零的在摄像机前面

![image-20230911200933120](image-20230911200933120.png)

> 这里补充一下，我们游戏的画面是在摄像机这里的，我们只能看到摄像机所涉及到的地方，别的地方我们是看不到的(`2D`)

然后，我们会发现伴随着小人创建的时候，也创建了两个文件：![image-20230911201140547](image-20230911201140547.png)

我这里已经归纳完毕了：![image-20230911201206569](image-20230911201206569.png)

![image-20230911201229909](image-20230911201229909.png)

按照中文的翻译，一个是动画控制器(Animator)，一个是动画(Animation)

> Animator：动画控制器，控制`Mecanim`动画系统的接口，用来管理多个动画；
>
> Animation：用于播放动画，老版中单独的一个`Animation`也可以完成动画的播放和切换，不过状态切换之类的需要程序猿代码控制。在新版中，状态管理部分交给了`Animator`；

控制器的画面展开如下：

![image-20230911202925253](image-20230911202925253.png)

动画的画面展开如下：

![image-20230911203125549](image-20230911203125549.png)

> 这里的动画很好理解：几张图片凑在一起，然后以一定的时间间隔进行播放，这就完成了动画的制作。![录制_2023_09_11_20_59_43_471](录制_2023_09_11_20_59_43_471.gif)
>
> 然后对应的，可以设置动画播放的速度也即是`张数/时间`

--------

在控制器中，我们需要修改角色的动画播放速度：

![image-20230911210603835](image-20230911210603835.png)

> 当然可以对文件改名，让自己和别人知道这个动画是干啥的

对于控制器的每一个框框，都对应着一种动画，例如这个`PlayerDamage`就是控制角色受伤的动画，控制器和动画的制作前面已经提到了，如果是我们需要在同一个物体创建不同的动画，只需要将符合动作的图片拉入到我们这个物体即可，这样只会产生动画文件而不会产生多余的动画控制器。做好的结果我们可以在`game`窗口中观看。下面是演示的`gif`

![录制_2023_09_11_21_17_58_350](录制_2023_09_11_21_17_58_350.gif)

![录制_2023_09_11_21_13_52_450](录制_2023_09_11_21_13_52_450.gif)

在对动画修缮之后，我们可以将在场景中的物体拖入下来，存储在一个文件夹中，方便我们之后生成物体。这下面就是我创建设置好动画的一些物体，具体操作看`gif`

![image-20230911212455592](image-20230911212455592.png)

![录制_2023_09_11_21_26_56_782](录制_2023_09_11_21_26_56_782.gif)

这样我们的主角就基本创建完成啦。

## 制作敌人

制作敌人其实是和主角一样的：![录制_2023_09_11_21_32_55_337](录制_2023_09_11_21_32_55_337.gif)

也同样会出现两个文件：![image-20230911213354815](image-20230911213354815.png)

同样的，我们把它们整理起来，然后打开状态机修改名字：

![image-20230911213540002](image-20230911213540002.png)

![录制_2023_09_11_21_36_45_427](录制_2023_09_11_21_36_45_427.gif)

这就是敌人的动画了(可能有点扁)，创建完成敌人1，我们可以如法炮制敌人2。但是这样有点无趣且有点傻。通过观察，我们发现敌人1和敌人2的状态机的逻辑是一样的，只是他们的画是不一样的，这样我们就可以使用敌人1的状态机来实现敌人2的动画。具体步骤如下：

![录制_2023_09_11_21_44_00_781](录制_2023_09_11_21_44_00_781.gif)

我们只需要创建一个`Animator Override Controller`来重写我们的敌人1的状态机把它变为敌人2的。可以在`gif`中看到，将我们敌人1的状态机拖入到重写的控制机中，就可以继承我们的敌人1的状态。但是这个时候，动画的图片还是敌人1的，我们还是需要去修改图片。

在前面我们知道，可以将动画拖入物体的时候不会产生新的状态机，只会产生动画，我们将敌人2的图片拉入到我们的敌人1这个创建好的物品，这样会产生一个敌人2的动画。

![录制_2023_09_11_21_50_45_598](录制_2023_09_11_21_50_45_598.gif)

在此之前，请确保我们已经将敌人1创建成为了预制件（记得每次创建物品并且设置完成动画之后都需要保存）。我们将敌人2动画拉入了敌人1的物体，然后保存我们敌人二的动画，就可以物品的敌人二的动画删除了

然后再重写的状态机上的动画区块加上敌人二的动画就行:

![image-20230911220939830](image-20230911220939830.png)

记得要在敌人2的物体上加入我们的状态机：这里图片会不一样，这个我倒是不知道

![image-20230911221305660](image-20230911221305660.png)

下面是具体操作：

![录制_2023_09_11_22_00_49_661](录制_2023_09_11_22_00_49_661.gif)

下面展示一下做好的两个敌人：

![录制_2023_09_11_22_20_37_365](录制_2023_09_11_22_20_37_365.gif)

这样敌人就做完了。

> 注：如果逻辑是一样的，我们就可以使用同样的状态机重写进行创建角色
