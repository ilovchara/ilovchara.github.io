---
title: RPG3
date: 2024-02-24 12:19:03
categories: RPG
typora-root-url: ./RPG3
---



> 在前面发现这个教程代码太乱了，这里就做一些标记

## 玩家相机

玩家相机需要使用`CineMachine`插件，这里在`Package Manager`

![image-20240224125403217](./../../RPG3/image-20240224125403217.png)

然后再`unity`的界面出就会出现`Cinemachine`选项。

![image-20240224125555679](./../../RPG3/image-20240224125555679.png)

但是创建位置是在GameObject中，这里先创建一个虚拟相机

![image-20240224130530740](./../../RPG3/image-20240224130530740.png)

这样在组件的配置中，我们就可以拖入需要观察的物体，来进行相机跟随了。

![image-20240224130626508](./../../RPG3/image-20240224130626508.png)

但是直接拖入角色的话，有些场景就不太容易实现。例如，如果要求当前角色不动但是摄像机需要动，那么就得关闭当前摄像机然后创建一个新的。这里我们可以创建一个空物体，然后让这个空物体和我们的角色组成一个组件。让相机跟随这个物体就行。

![image-20240224141048029](./../../RPG3/image-20240224141048029.png)

然后调整一下摄像头的位置，这里需要注意`Body`的设置，我刚开始没注意就导致移动不了。这里是找的一个[博客](https://blog.csdn.net/zhenghongzhi6/article/details/104340502)的解释。

![image-20240224141153808](./../../RPG3/image-20240224141153808.png)

## 状态机重构

> 因为前面的状态太抽象了，而且使用了反射，这里需要重构。(基本上是全部^ - ^)

这里贴上设计的思想：

![image-20240224213136176](./../../RPG3/image-20240224213136176.png)

唉，这里就开始吧。首先需要重构的是我们的`FSM`



## 技能系统设计

![image-20240224202430557](./../../RPG3/image-20240224202430557.png)
